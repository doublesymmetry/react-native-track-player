"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[8935],{3905:function(e,t,n){n.d(t,{Zo:function(){return s},kt:function(){return m}});var r=n(7294);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var p=r.createContext({}),c=function(e){var t=r.useContext(p),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},s=function(e){var t=c(e.components);return r.createElement(p.Provider,{value:t},e.children)},u={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},d=r.forwardRef((function(e,t){var n=e.components,o=e.mdxType,a=e.originalType,p=e.parentName,s=l(e,["components","mdxType","originalType","parentName"]),d=c(n),m=o,f=d["".concat(p,".").concat(m)]||d[m]||u[m]||a;return n?r.createElement(f,i(i({ref:t},s),{},{components:n})):r.createElement(f,i({ref:t},s))}));function m(e,t){var n=arguments,o=t&&t.mdxType;if("string"==typeof e||o){var a=n.length,i=new Array(a);i[0]=d;var l={};for(var p in t)hasOwnProperty.call(t,p)&&(l[p]=t[p]);l.originalType=e,l.mdxType="string"==typeof e?e:o,i[1]=l;for(var c=2;c<a;c++)i[c]=n[c];return r.createElement.apply(null,i)}return r.createElement.apply(null,n)}d.displayName="MDXCreateElement"},4894:function(e,t,n){n.r(t),n.d(t,{assets:function(){return s},contentTitle:function(){return p},default:function(){return m},frontMatter:function(){return l},metadata:function(){return c},toc:function(){return u}});var r=n(7462),o=n(3366),a=(n(7294),n(3905)),i=["components"],l={sidebar_position:6},p="Migrating from v2 to v3",c={unversionedId:"v3-migration",id:"v3-migration",title:"Migrating from v2 to v3",description:"This version includes fundamental changes in how we handle the Android",source:"@site/docs/v3-migration.md",sourceDirName:".",slug:"/v3-migration",permalink:"/docs/next/v3-migration",editUrl:"https://github.com/doublesymmetry/react-native-track-player/tree/main/docs/docs/v3-migration.md",tags:[],version:"current",sidebarPosition:6,frontMatter:{sidebar_position:6},sidebar:"app",previous:{title:"Migrating from v1 to v2",permalink:"/docs/next/v2-migration"},next:{title:"Troubleshooting",permalink:"/docs/next/troubleshooting"}},s={},u=[],d={toc:u};function m(e){var t=e.components,n=(0,o.Z)(e,i);return(0,a.kt)("wrapper",(0,r.Z)({},d,n,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("h1",{id:"migrating-from-v2-to-v3"},"Migrating from v2 to v3"),(0,a.kt)("p",null,"This version includes fundamental changes in how we handle the Android\nforeground service, ensuring that the OS never stops the app process, and that\ncontrols for audio playback are present even if the app is stopped. This mimics\nhow other popular apps (Spotify, Soundcloud, Google Podcasts, etc.) work."),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"On Android, the audio service can't be manually stopped by the app anymore.\nThe OS itself decides when to stop it."),(0,a.kt)("li",{parentName:"ul"},"An audio control notification will ",(0,a.kt)("em",{parentName:"li"},"always")," be present (depending on phone\nvendor, this would look and behave differently), which allows users to\nquickly go back to the app by tapping on it."),(0,a.kt)("li",{parentName:"ul"},"The ",(0,a.kt)("inlineCode",{parentName:"li"},"destroy")," function does not exist anymore. "),(0,a.kt)("li",{parentName:"ul"},"The ",(0,a.kt)("inlineCode",{parentName:"li"},"stopWithApp")," flag turns into ",(0,a.kt)("inlineCode",{parentName:"li"},"stoppingAppPausesPlayback")," ",(0,a.kt)("ul",{parentName:"li"},(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",{parentName:"li",href:"https://github.com/doublesymmetry/react-native-track-player/pull/1447#issuecomment-1195246389"},"More information here"))))),(0,a.kt)("p",null,"The full changelog of added features and bug fixes ",(0,a.kt)("a",{parentName:"p",href:"https://github.com/doublesymmetry/react-native-track-player/releases/tag/v3.0"},"can be found here"),"."),(0,a.kt)("p",null,"When migrating from v2 to v3, the following has changed:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-diff"},"// Methods\nawait TrackPlayer.updateOptions({\n-  stopWithApp: true,\n+  stoppingAppPausesPlayback: true,\n  ...\n});\n\n// remove all usage of `.destroy()`\n-  TrackPlayer.destroy();\n")))}m.isMDXComponent=!0}}]);
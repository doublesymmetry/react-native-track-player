"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[8706],{3905:function(e,t,n){n.d(t,{Zo:function(){return s},kt:function(){return b}});var a=n(7294);function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function r(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,a,i=function(e,t){if(null==e)return{};var n,a,i={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var c=a.createContext({}),p=function(e){var t=a.useContext(c),n=t;return e&&(n="function"==typeof e?e(t):r(r({},t),e)),n},s=function(e){var t=p(e.components);return a.createElement(c.Provider,{value:t},e.children)},u={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},d=a.forwardRef((function(e,t){var n=e.components,i=e.mdxType,o=e.originalType,c=e.parentName,s=l(e,["components","mdxType","originalType","parentName"]),d=p(n),b=i,h=d["".concat(c,".").concat(b)]||d[b]||u[b]||o;return n?a.createElement(h,r(r({ref:t},s),{},{components:n})):a.createElement(h,r({ref:t},s))}));function b(e,t){var n=arguments,i=t&&t.mdxType;if("string"==typeof e||i){var o=n.length,r=new Array(o);r[0]=d;var l={};for(var c in t)hasOwnProperty.call(t,c)&&(l[c]=t[c]);l.originalType=e,l.mdxType="string"==typeof e?e:i,r[1]=l;for(var p=2;p<o;p++)r[p]=n[p];return a.createElement.apply(null,r)}return a.createElement.apply(null,n)}d.displayName="MDXCreateElement"},3306:function(e,t,n){n.r(t),n.d(t,{assets:function(){return s},contentTitle:function(){return c},default:function(){return b},frontMatter:function(){return l},metadata:function(){return p},toc:function(){return u}});var a=n(7462),i=n(3366),o=(n(7294),n(3905)),r=["components"],l={sidebar_position:4},c="Background Mode",p={unversionedId:"basics/background-mode",id:"basics/background-mode",title:"Background Mode",description:"React Native Track Player supports playing audio while your app is in the",source:"@site/docs/basics/background-mode.md",sourceDirName:"basics",slug:"/basics/background-mode",permalink:"/docs/next/basics/background-mode",editUrl:"https://github.com/doublesymmetry/react-native-track-player/tree/main/docs/docs/basics/background-mode.md",tags:[],version:"current",sidebarPosition:4,frontMatter:{sidebar_position:4},sidebar:"app",previous:{title:"Playback Service",permalink:"/docs/next/basics/playback-service"},next:{title:"Platform Support",permalink:"/docs/next/basics/platform-support"}},s={},u=[{value:"Android",id:"android",level:2},{value:"Notification",id:"notification",level:3},{value:"iOS",id:"ios",level:2},{value:"iOS Simulator",id:"ios-simulator",level:3}],d={toc:u};function b(e){var t=e.components,l=(0,i.Z)(e,r);return(0,o.kt)("wrapper",(0,a.Z)({},d,l,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("h1",{id:"background-mode"},"Background Mode"),(0,o.kt)("p",null,"React Native Track Player supports playing audio while your app is in the\nbackground on all supported platforms."),(0,o.kt)("h2",{id:"android"},"Android"),(0,o.kt)("p",null,"Background audio playback works right out of the box. By default, the audio will\ncontinue to play, not only when the app is suspended in the background, but also\nafter the app is closed by the user. If that is not the desired behavior, you\ncan disable it with the ",(0,o.kt)("inlineCode",{parentName:"p"},"android.appKilledPlaybackBehavior")," property in\n",(0,o.kt)("inlineCode",{parentName:"p"},"updateOptions"),"."),(0,o.kt)("p",null,"In this case, the audio will still play while the app is open in the background.:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-js"},"TrackPlayer.updateOptions({\n    android: {\n        // This is the default behavior\n        appKilledPlaybackBehavior: AppKilledPlaybackBehavior.ContinuePlayback\n    },\n    ...\n});\n")),(0,o.kt)("p",null,"Please look at the ",(0,o.kt)("a",{parentName:"p",href:"/docs/next/api/constants/app-killed-playback-behavior"},(0,o.kt)("inlineCode",{parentName:"a"},"AppKilledPlaybackBehavior")),"\ndocumentation for all the possible settings and how they behave."),(0,o.kt)("p",null,"Please note that while your app is in background, your UI might be unmounted by\nReact Native. Event listeners added in the ",(0,o.kt)("a",{parentName:"p",href:"/docs/next/basics/playback-service"},"playback service"),"\nwill continue to receive events."),(0,o.kt)("h3",{id:"notification"},"Notification"),(0,o.kt)("p",null,"The notification will only be visible if the following are true:"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("inlineCode",{parentName:"li"},"AppKilledPlaybackBehavior.ContinuePlayback")," or ",(0,o.kt)("inlineCode",{parentName:"li"},"AppKilledPlaybackBehavior.PausePlayback")," are selected."),(0,o.kt)("li",{parentName:"ul"},"Android has not killed the playback service due to no memory, crash, or other issue.")),(0,o.kt)("p",null,"Your app will be opened when the notification is tapped. You can implement a\ncustom initialization (e.g.: opening directly the player UI) by using the\n",(0,o.kt)("a",{parentName:"p",href:"https://reactnative.dev/docs/linking"},"Linking API")," looking for the\n",(0,o.kt)("inlineCode",{parentName:"p"},"trackplayer://notification.click")," URI."),(0,o.kt)("h2",{id:"ios"},"iOS"),(0,o.kt)("p",null,"In order to continue playing audio in the background (e.g. via a lockscreen or\nwhen the app has been backgrounded), you'll need to enable the\n",(0,o.kt)("inlineCode",{parentName:"p"},"Audio, AirPlay, and Picture in Picture"),' Capability in your project. Without\nactivating it, the audio will only play when the app is in the foreground. This\ncan be added via the "Capability" option on the "Signing & Capabilities" tab:'),(0,o.kt)("ol",null,(0,o.kt)("li",{parentName:"ol"},'Click on the "+ Capabilities" button.'),(0,o.kt)("li",{parentName:"ol"},'Search for and select "Background Modes".')),(0,o.kt)("p",null,(0,o.kt)("img",{alt:"Enable Background Modes",src:n(2046).Z,width:"1385",height:"1018"})),(0,o.kt)("p",null,"Once selected, the Capability will be shown below the other enabled\ncapabilities. If no option appears when searching, the capability may already\nbe enabled."),(0,o.kt)("p",null,"Now ensure that both the ",(0,o.kt)("inlineCode",{parentName:"p"},"Audio, AirPlay, and Picture in Picture")," sub-modes are\nenabled:"),(0,o.kt)("p",null,(0,o.kt)("img",{alt:"Enable Background Audio",src:n(3575).Z,width:"1385",height:"1018"})),(0,o.kt)("h3",{id:"ios-simulator"},"iOS Simulator"),(0,o.kt)("p",null,"As of iOS Simulator version 11, Apple has removed support for Control Center and\nNow Playing Info from the simulator. You will not be able to test lock screen\ncontrols on recent versions of iOS Simulator. You can either test on real\ndevices, or download older versions of the iOS Simulator."))}b.isMDXComponent=!0},2046:function(e,t,n){t.Z=n.p+"assets/images/ios-background-mode-audio-1-6de30062c7fe7e8006375894f8bc7202.png"},3575:function(e,t,n){t.Z=n.p+"assets/images/ios-background-mode-audio-2-92049129bc7e0f6e00d4038ab542487c.png"}}]);